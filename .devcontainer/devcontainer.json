{
    "image": "mcr.microsoft.com/vscode/devcontainers/universal:3",
    "onCreateCommand": "curl -LsSf https://astral.sh/uv/install.sh | sh",
    "postCreateCommand": "uv sync && echo 'source ${containerWorkspaceFolder}/.venv/bin/activate' >> ~/.bashrc",
    "postStartCommand": "[ ! -f api_params.jsonc ] && cp .devcontainer/example/api_params.jsonc api_params.jsonc || echo 'api_params.jsonc already exists, skipping'; [ ! -f .env ] && cp .devcontainer/example/.env .env || echo '.env already exists, skipping'",
    "customizations": {
        "vscode": {
            "extensions": [
                "GitHub.copilot",
                "ms-python.python",
                "ms-python.debugpy"
            ]
        },
        "settings": {
            "markdown.preview.doubleClickToSwitchToEditor": false,
            "workbench.editorAssociations": {
                "*.md": "vscode.markdown.preview.editor"
            },
            "python-envs.defaultEnvManager": "ms-python.python:venv",
            "python.defaultInterpreterPath": "${workspaceFolder}/.venv/bin/python",
            "python.terminal.activateEnvironment": true,
            "python.terminal.activateEnvInCurrentTerminal": true
        }
    }
}
